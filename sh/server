#!/bin/bash
function  FtpServer_start() {
    local affirm=`ps -ef |grep -v grep |  grep "python ftpserver/FtpServer.py"`
    if test -z "$affirm";then
	python ftpserver/FtpServer.py &
    fi
}

function Uploads() {
    local affirm=`ps -ef |grep -v grep |  grep "upload/uploads.py"`
    if test -z "$affirm";then
       	python upload/uploads.py &
    fi
}

function Rails() {
    local affirm=`netstat -anutpl  | grep 3000`
    if test -z "$affirm";then
	    su - qishanqing <<EOF
	    source /opt/servers/run.sh
	    cd /home/qishanqing/myscript/builder
	    nohup rails s -b 192.168.0.231 -p 3000 >> /home/qishanqing/myscript/builder/log/development.log 2>&1 &
EOF
}

export -f FtpServer_start
export -f Uploads
export -f Rails
